import React from 'react'
import chroma from 'chroma-js'
import Eyes from './Eyes'
import Mouth from './Mouth'
import { formatHSL } from '../helpers/color'
import map from 'lodash/fp/map'

const Face = ({ color, shape, vOffset }) => {
  const width = 25 + shape * 50
  const x = 50 - width / 2

  return (
    <rect
      x={x}
      y={vOffset}
      rx="20"
      ry="20"
      width={width}
      height={80}
      fill={formatHSL(color)}
    />
  )
}

const Head = ({ genome, vOffset }) => {
  const {colors, eyes, mouth, shape} =  genome
  const polygonCount = 5
  let colorNum = 0
  const palette =  map(color => chroma.gl(color.red, color.blue, color.green, color.alpha).hex(), colors )
  if(palette.length < 2) palette.push('white')
  if(palette.length < 2) palette.push('lightblue')
  const scale = chroma.scale(palette)
  return (
    <svg x="-22" y={vOffset-210} viewBox="-15 0 150 50">
        <g id="g137">
          <path
              fill={scale(colorNum++/polygonCount)}
             d="m 88.748803,129.76753 c -1.843264,-1.16833 -3.459369,-2.31187 -3.591344,-2.54119 -0.131976,-0.22931 -6.283538,-4.13751 -13.67014,-8.68487 -9.51999,-5.86072 -13.430184,-8.45019 -13.430184,-8.89393 0,-0.69963 2.812249,-5.90706 5.134043,-9.5067 l 1.517454,-2.352611 -1.038115,-1.636937 c -3.500396,-5.519551 -7.004902,-15.926487 -7.011658,-20.821725 -0.0053,-3.80505 1.466055,-4.566407 6.996006,-3.620228 5.545598,0.948856 12.691768,3.524348 17.050652,6.145085 l 2.010882,1.209024 1.774721,-0.89932 c 5.052844,-2.56047 11.297727,-2.559801 16.90671,0.0018 1.86301,0.850834 1.90228,0.853673 2.82222,0.204039 4.32729,-3.055793 16.47445,-7.097343 21.33158,-7.097343 1.89001,0 3.23096,0.937692 3.53827,2.474205 0.74821,3.741056 -2.94839,15.915268 -6.65689,21.923523 l -1.27279,2.062076 2.26813,3.791622 c 1.24748,2.0854 2.80522,4.77679 3.46165,5.98088 1.05783,1.94036 1.13336,2.24766 0.66436,2.70293 -0.29104,0.28252 -6.21545,4.01336 -13.16535,8.29074 -6.9499,4.27739 -13.15965,8.23668 -13.79944,8.79843 -1.692755,1.48626 -7.065955,4.6583 -7.832817,4.62406 -0.361107,-0.0161 -2.164687,-0.98522 -4.00795,-2.15356 z"
             id="path147"
              />
          <path
              fill={scale(colorNum++/polygonCount)}
             d="m 89.316064,129.47774 c -4.057502,-2.49163 -3.934425,-2.29338 -3.205428,-5.16336 0.877033,-3.45278 0.819123,-8.403 -0.138931,-11.87588 -2.103681,-7.62569 -7.088393,-13.511161 -14.251642,-16.826969 -3.61945,-1.675413 -3.866258,-1.676507 -5.17591,-0.02294 -0.625884,0.790244 -1.276293,1.436807 -1.445352,1.436807 -0.468129,0 -2.996368,-4.4334 -4.224757,-7.408333 -1.534343,-3.7159 -3.058319,-8.994257 -3.487274,-12.07833 -0.463521,-3.33259 -0.05377,-5.101135 1.258158,-5.430408 1.754294,-0.4403 6.333985,0.194462 10.536559,1.460407 3.694452,1.112882 10.827339,4.24872 12.59098,5.535385 0.491279,0.358412 0.83081,0.351202 1.763889,-0.03746 4.494814,-1.872255 6.118424,-2.258224 9.44578,-2.245478 3.335729,0.01278 3.987797,0.162592 8.819444,2.026285 l 1.5875,0.61234 2.46945,-1.453544 c 5.14593,-3.028956 14.72756,-6.028087 19.25856,-6.028087 2.07735,0 2.47055,0.104632 2.94643,0.784051 1.11426,1.590829 0.33386,7.080672 -1.91956,13.50345 -1.87892,5.35536 -4.70437,10.759722 -5.62529,10.759722 -0.15493,0 -0.65935,-0.555863 -1.12092,-1.235253 -0.46157,-0.679389 -1.11075,-1.323091 -1.44261,-1.430448 -0.83248,-0.269306 -4.97066,1.525721 -7.5172,3.260744 -2.34533,1.597938 -5.66427,4.850929 -7.08942,6.948559 -1.6275,2.39545 -3.23655,6.30692 -3.859835,9.38295 -0.683983,3.37561 -0.540255,8.22135 0.325568,10.97614 0.280167,0.89141 0.392407,1.81002 0.249427,2.04137 -0.446997,0.72326 -6.515957,4.27246 -7.257933,4.24452 -0.388055,-0.0146 -1.958413,-0.79592 -3.489683,-1.73624 z"
             id="path145"
              />
          <path
              fill={scale(colorNum++/polygonCount)}
             d="m 89.515385,129.42803 c -1.615671,-0.98717 -3.019044,-2.00713 -3.118605,-2.26658 -0.09956,-0.25946 0.07141,-1.58161 0.379945,-2.93812 0.781196,-3.43465 0.724463,-8.45414 -0.133469,-11.80862 -1.318238,-5.15426 -4.420336,-10.00446 -8.784975,-13.735511 -2.278001,-1.947317 -7.972121,-4.916992 -9.427949,-4.916992 -0.676906,0 -1.343315,0.392915 -2.138996,1.261153 l -1.15576,1.261153 -0.672723,-0.952472 c -2.975333,-4.21262 -6.769721,-15.591794 -6.753094,-20.252185 0.0084,-2.360297 0.293792,-2.581263 3.2468,-2.514027 4.703577,0.107094 14.128711,3.13855 19.122594,6.150501 l 2.38909,1.440928 2.0007,-0.897861 c 5.814888,-2.609567 10.856156,-2.624831 16.570657,-0.05017 2.16048,0.973399 2.26858,0.987211 3.175,0.405644 4.14965,-2.66245 12.07083,-5.733735 17.39066,-6.742888 5.5872,-1.059874 6.48632,-0.697123 6.39548,2.580258 -0.0717,2.587759 -1.06452,6.885719 -2.57933,11.166219 -1.10832,3.131854 -3.32244,7.823192 -4.31616,9.145188 -0.49409,0.657303 -0.52973,0.648466 -1.13979,-0.282615 -0.34637,-0.528625 -1.04768,-1.177247 -1.55846,-1.441384 -0.80854,-0.418109 -1.17437,-0.393733 -2.82735,0.188386 -2.57179,0.905685 -6.21068,3.11135 -8.4403,5.115975 -5.85728,5.26619 -9.264422,13.29012 -8.747031,20.59954 0.117221,1.65606 0.450437,3.8778 0.74048,4.9372 0.480882,1.75646 0.475795,1.98315 -0.05772,2.57268 -0.737969,0.81544 -5.619736,3.79515 -6.193652,3.78044 -0.235653,-0.006 -1.750373,-0.81867 -3.366044,-1.80584 z"
             id="path143"
              />
          <path
              fill={scale(colorNum++/polygonCount)}
             d="m 89.481082,129.38602 c -1.634538,-1.01494 -3.030969,-2.0262 -3.103182,-2.24725 -0.168605,-0.51611 3.599574,-1.18559 6.673176,-1.18559 2.182477,0 5.858263,0.51795 6.21623,0.87591 0.09095,0.091 -0.03529,0.40716 -0.280546,0.70267 -0.580101,0.69898 -5.548461,3.71511 -6.105331,3.70635 -0.235653,-0.004 -1.765809,-0.83715 -3.400347,-1.85209 z M 65.473764,91.750169 c -1.325417,-2.625637 -2.811097,-7.685367 -2.907551,-9.902147 -0.108731,-2.498959 0.418778,-2.948995 3.130955,-2.671124 3.263139,0.334318 11.409967,3.185792 11.409967,3.993605 0,0.162272 -0.967178,1.24257 -2.149286,2.400663 -1.182107,1.158094 -3.336008,3.494687 -4.786446,5.19243 -1.450439,1.697743 -2.862225,3.086805 -3.137303,3.086805 -0.275078,0 -0.977229,-0.945104 -1.560336,-2.100232 z m 52.098586,1.285011 c -0.42774,-0.448372 -2.02682,-2.280251 -3.5535,-4.070844 -1.52669,-1.790592 -3.31263,-3.665085 -3.96875,-4.165539 -0.65613,-0.500453 -1.19296,-1.126524 -1.19296,-1.391268 0,-1.058282 7.39123,-3.845684 11.27338,-4.251449 2.41774,-0.252704 3.19051,0.301127 3.19051,2.286582 0,3.045193 -3.37897,12.407739 -4.47799,12.407739 -0.27113,0 -0.84294,-0.366849 -1.27069,-0.815221 z"
             id="path141"
              />
          <path
              fill={scale(colorNum++/polygonCount)}
             d="m 89.514486,129.42749 c -1.901296,-1.16168 -2.817526,-1.91635 -2.595798,-2.13809 0.671429,-0.67142 5.990959,-1.06236 8.98073,-0.66 1.565077,0.21062 2.91422,0.45158 2.998092,0.53545 0.08388,0.0839 0.05399,0.31189 -0.0664,0.50669 -0.313552,0.50734 -5.437798,3.57544 -5.949678,3.56233 -0.235653,-0.006 -1.750777,-0.81891 -3.366943,-1.80638 z"
             id="path139"
              />
      </g>
    </svg>

  )
}

export default Head
