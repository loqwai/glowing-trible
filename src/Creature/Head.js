import React from 'react'
import chroma from 'chroma-js'
import Eyes from './Eyes'
import Mouth from './Mouth'
import { formatHSL } from '../helpers/color'
import map from 'lodash/fp/map'

const Face = ({ color, shape, vOffset }) => {
  const width = 25 + shape * 50
  const x = 50 - width / 2

  return (
    <rect
      x={x}
      y={vOffset}
      rx="20"
      ry="20"
      width={width}
      height={80}
      fill={formatHSL(color)}
    />
  )
}

const Head = ({ genome, vOffset }) => {
  const {colors, eyes, mouth, shape} =  genome
  const polygonCount = 5
  let colorNum = 0
  const palette =  map(color => chroma.gl(color.red, color.blue, color.green, color.alpha).hex(), colors )
  if(palette.length < 2) palette.push('white')
  if(palette.length < 2) palette.push('lightblue')
  const scale = chroma.scale(palette)
  //fill={scale(colorNum++/polygonCount)}
  return (
    <svg
       height="84"
       width="100"
       x="0"
       y={vOffset}
       viewBox="0 0 100 84">
      <path
          fill={scale(colorNum++/polygonCount)}
         d="M 44.244719,80.651103 C 41.70328,79.040243 39.47504,77.463563 39.293077,77.147383 39.111112,76.831217 30.629514,71.442702 20.445079,65.172933 7.319189,57.092339 1.9279253,53.522052 1.9279253,52.910236 c 0,-0.96463 3.8774485,-8.144485 7.0786717,-13.107566 L 11.098819,36.558957 9.6674959,34.301995 C 4.84125,26.691796 0.00933733,12.343011 2.2345833e-5,5.5935966 -0.00728514,0.34730244 2.0213771,-0.70243482 9.6459153,0.60212973 17.292027,1.9103852 27.144962,5.4614 33.154867,9.0747972 l 2.772546,1.6669678 2.446935,-1.2399568 c 6.966717,-3.5303028 15.576983,-3.5293804 23.310488,0.00248 2.568665,1.1731058 2.622809,1.1770198 3.891196,0.2813231 C 71.542376,5.5723731 88.290533,-4.2584641e-7 94.987405,-4.2584641e-7 97.593296,-4.2584641e-7 99.44216,1.2928625 99.86587,3.4113627 100.89748,8.5694237 95.800714,25.354879 90.687541,33.638889 l -1.754887,2.843132 3.127233,5.22778 c 1.71999,2.875289 3.867757,6.586101 4.772824,8.246266 1.458506,2.675313 1.562644,3.099009 0.916001,3.726722 -0.401278,0.389531 -8.569685,5.533506 -18.152009,11.431036 -9.582323,5.897543 -18.144149,11.356498 -19.026273,12.131023 -2.333922,2.049213 -9.742336,6.422731 -10.799664,6.375522 -0.497884,-0.0222 -2.984608,-1.358393 -5.526047,-2.969267 z"
         id="path147"
      />
      <path
          fill={scale(colorNum++/polygonCount)}
         d="M 45.026843,80.251549 C 39.432475,76.816161 39.60217,77.089502 40.60729,73.132456 41.816518,68.371861 41.736674,61.54664 40.415736,56.758332 37.515241,46.244249 30.642463,38.12953 20.76598,33.557788 c -4.990394,-2.310011 -5.330686,-2.311519 -7.136397,-0.03163 -0.862951,1.089566 -1.759716,1.981029 -1.99281,1.981029 -0.645443,0 -4.1313065,-6.112645 -5.8249741,-10.214398 C 3.6962906,20.169414 1.5950761,12.891766 1.0036452,8.6395342 0.36455572,4.0446544 0.92950868,1.6062352 2.7383575,1.152243 5.1571279,0.54516992 11.471475,1.4203616 17.265864,3.1658104 c 5.093804,1.5344098 14.928425,5.8580136 17.360083,7.6320306 0.677361,0.494168 1.145497,0.484227 2.432,-0.05165 6.197321,-2.5814115 8.435908,-3.1135745 13.023571,-3.0960007 4.599208,0.017621 5.49826,0.2241772 12.159997,2.7937837 l 2.1888,0.844277 3.404807,-2.0041049 C 74.930183,5.1079092 88.14106,0.97279311 94.388273,0.97279311 c 2.864191,0 3.406324,0.14426359 4.062454,1.08102709 1.53631,2.1933895 0.460316,9.7626278 -2.646635,18.6181708 -2.590601,7.383817 -6.48625,14.835197 -7.755989,14.835197 -0.213613,0 -0.909093,-0.766408 -1.545492,-1.703132 -0.6364,-0.936722 -1.53147,-1.82424 -1.989029,-1.97226 -1.1478,-0.371312 -6.853404,2.10362 -10.364501,4.49582 -3.233674,2.203191 -7.809733,6.688322 -9.774689,9.580475 -2.243951,3.302777 -4.462463,8.6958 -5.32183,12.936943 -0.943057,4.654194 -0.744889,11.335362 0.448883,15.133588 0.386287,1.22905 0.54104,2.495603 0.343903,2.814582 -0.616307,0.99721 -8.984015,5.890746 -10.00703,5.852223 -0.535039,-0.02013 -2.700204,-1.097392 -4.811475,-2.393878 z"
         id="path145"
      />
      <path
          fill={scale(colorNum++/polygonCount)}
         d="m 45.301661,80.18301 c -2.227641,-1.361082 -4.162572,-2.767373 -4.299844,-3.125096 -0.13727,-0.357736 0.09846,-2.180678 0.523858,-4.050995 1.07709,-4.735598 0.998868,-11.656327 -0.184024,-16.281388 -1.817548,-7.106546 -6.094632,-13.793863 -12.112472,-18.93813 -3.140843,-2.684905 -10.991732,-6.779408 -12.998986,-6.779408 -0.933299,0 -1.852125,0.54174 -2.949187,1.738842 l -1.593529,1.738842 -0.927531,-1.313241 C 6.657642,27.364196 1.4260484,11.674916 1.4489732,5.2493022 1.4605549,1.9949922 1.8540452,1.6903306 5.9255682,1.7830336 12.410726,1.9306918 25.405831,6.1103766 32.291254,10.263169 l 3.294009,1.98671 2.758508,-1.237945 c 8.017401,-3.5979966 14.968157,-3.6190421 22.847148,-0.06917 2.978808,1.342095 3.127853,1.361138 4.377599,0.55929 5.721419,-3.6709098 16.642915,-7.9055097 23.977745,-9.296901 7.703471,-1.46132394 8.943152,-0.9611732 8.817904,3.557586 -0.09886,3.5679281 -1.467729,9.493832 -3.556306,15.395663 -1.52812,4.318111 -4.580885,10.786394 -5.950998,12.609124 -0.681237,0.906271 -0.730376,0.894086 -1.57151,-0.389661 -0.477565,-0.728853 -1.444511,-1.623155 -2.14876,-1.987339 -1.114792,-0.576477 -1.619188,-0.542868 -3.898269,0.259741 -3.545911,1.248732 -8.563108,4.28984 -11.637244,7.05376 -8.075851,7.260872 -12.77352,18.324037 -12.060157,28.402056 0.161621,2.283329 0.62105,5.3466 1.020953,6.807271 0.663026,2.421756 0.656013,2.73431 -0.07958,3.547137 -1.01749,1.124305 -7.748331,5.232644 -8.53963,5.212363 -0.324911,-0.0083 -2.413364,-1.128759 -4.641005,-2.489841 z"
         id="path143"
      />
      <path
          fill={scale(colorNum++/polygonCount)}
         d="m 45.254365,80.125088 c -2.253655,-1.39937 -4.179014,-2.793667 -4.278579,-3.098444 -0.232468,-0.711598 4.96299,-1.634658 9.200784,-1.634658 3.009137,0 8.077206,0.714135 8.57076,1.20768 0.1254,0.125468 -0.04866,0.561381 -0.386808,0.968821 -0.799827,0.963734 -7.65006,5.122288 -8.417856,5.11021 -0.324912,-0.0055 -2.434647,-1.154239 -4.688301,-2.553609 z M 12.153761,28.233853 C 10.326314,24.6137 8.2779011,17.637489 8.1449131,14.581056 c -0.1499152,-3.445493 0.5773991,-4.06599 4.3168709,-3.682869 4.499123,0.460948 15.731736,4.392478 15.731736,5.506268 0,0.223736 -1.333517,1.71322 -2.963374,3.309965 -1.629855,1.596747 -4.599592,4.818375 -6.599414,7.159174 -1.999824,2.3408 -3.946354,4.255999 -4.325624,4.255999 -0.37927,0 -1.347375,-1.303083 -2.151347,-2.89574 z m 71.832041,1.771736 C 83.396046,29.387387 81.19128,26.861645 79.086337,24.392826 76.981381,21.924009 74.518978,19.339512 73.614338,18.6495 c -0.904653,-0.69001 -1.644819,-1.553219 -1.644819,-1.91824 0,-1.459129 10.190817,-5.30232 15.543414,-5.861777 3.333511,-0.348421 4.398984,0.415186 4.398984,3.152674 0,4.198625 -4.658827,17.107436 -6.174124,17.107436 -0.373827,0 -1.162222,-0.505801 -1.751991,-1.124004 z"
         id="path141"
      />
      <path
          fill={scale(colorNum++/polygonCount)}
         d="m 45.300421,80.182266 c -2.621452,-1.601692 -3.884724,-2.642209 -3.579012,-2.947938 0.925747,-0.925734 8.260163,-1.464751 12.382374,-0.909989 2.157883,0.290397 4.018043,0.622626 4.133683,0.738263 0.115652,0.115679 0.07444,0.430025 -0.09155,0.69861 -0.432317,0.699506 -7.49748,4.929714 -8.203246,4.911639 -0.324912,-0.0083 -2.413921,-1.12909 -4.642245,-2.490585 z"
         id="path139"
      />
    </svg>

  )
}

export default Head
